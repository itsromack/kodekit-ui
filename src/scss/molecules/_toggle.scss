/* ==========================================================================
   Toggle
   ========================================================================== */

/*
Toggle

CSS only animated checkbox toggle styling

default - Default
.k-checkbox-toggle--neutral - Neutral

markup:
<div class="k-checkbox-toggle {$modifiers}">
  <input type="checkbox" name="group1" id="group1{$modifiers}" value="1">
  <label for="group1{$modifiers}">
    <span>{label}</span>
  </label>
</div>

sg-wrapper:
<div class="sg-fullbox" style="max-width: 400px;">
    <sg-wrapper-content/>
</div>

Styleguide 2.23

*/


@include modernizr('.k-appearance.k-checked') {
  .k-checkbox-toggle {
    position: relative;
    display: block;
    margin-bottom: $spacing-small;

    &:last-child {
      margin-bottom: 0;
    }


    /* Hiding the input but keeping accessible */

    input {
      @extend .visually-hidden;
    }


    /* Basic label styling */

    label {
      line-height: $checkbox-toggle-size;
      font-weight: $regular
    }


    /* Making label, span and their psuedo elements fully clickable */

    label,
    span {
      position: relative;
      display: block;
      margin: 0;
      cursor: pointer;

      &:before,
      &:after {
        position: absolute;
        display: block;
      }
    }


    /* Toggle area outer element */

    label:before {
      top: 0;
      right: 0;
      width: $checkbox-toggle-size * 2;
      height: $checkbox-toggle-size;
      border: $checkbox-toggle-border-width solid #ccc;
      border-radius: $checkbox-toggle-border-radius;
      content: " ";
      background: white;
      @include transition;
    }


    /* Toggle area inner element */

    label:after {
      top: $checkbox-toggle-border-width + $checkbox-toggle-padding;
      right: $checkbox-toggle-border-width + $checkbox-toggle-padding;
      width: $checkbox-toggle-width-inner;
      height: $checkbox-toggle-height-inner;
      border-radius: $checkbox-toggle-border-radius - $checkbox-toggle-padding;
      content: " ";
      background: $checkbox-toggle-0;
      @include transition;
    }


    /* The fake toggle handlers */

    span {
      position: relative;
      z-index: 1;
      overflow: hidden;

      &:before,
      &:after {
        text-align: center;
        font-size: 12px;
        line-height: $checkbox-toggle-height-inner - $checkbox-toggle-border-width;
      }

      /**
       * The right fake toggle handler
       *
       * This is only the "data-false" content
       * The actual handler is the :after element
       */

      @include icon-before(x, true) {
        top: $checkbox-toggle-border-width + $checkbox-toggle-padding;
        right: $checkbox-toggle-border-width + $checkbox-toggle-padding;
        width: $checkbox-toggle-width-inner - $checkbox-toggle-height-inner;
        height: $checkbox-toggle-height-inner;
        border: 1px solid transparent;
        color: white;
        font-size: 12px;
        text-align: center;
        @include transition;
      }


      /**
       * The left fake toggle handler
       *
       * This :after element actually holds the fake handler
       * 1. The "data-true" content is shown here as well by using a negative text-indent
       * 2. Text color set to 0 by default so it won't show outside the toggle area
       */

      @include icon-after(check, true) {
        top: $checkbox-toggle-border-width + $checkbox-toggle-padding;
        right: ($checkbox-toggle-size * 2) - $checkbox-toggle-height-inner - ($checkbox-toggle-border-width + $checkbox-toggle-padding);
        width: $checkbox-toggle-height-inner;
        height: $checkbox-toggle-height-inner;
        border: 1px solid $checkbox-toggle-0;
        border-radius: $checkbox-toggle-border-radius - $checkbox-toggle-padding;
        background: white;
        text-indent: -($checkbox-toggle-width-inner); /* 1 */
        text-align: center;
        color: rgba(white, 0); /* 2 */
        font-size: 12px;
        @include transition;
      }
    }



    /* Toggle area styling on focus / active */

    input:active,
    input:focus {
      & + label:before {
        border: $checkbox-toggle-border-width solid #66afe9;
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6);
      }
    }


    /** When the checkbox is in checked state
    ========================================================================= */

    input:checked + label {

      /* Green background */

      &:after {
        background: $checkbox-toggle-1;
      }


      /* Switching the fake toggle handler */

      span {

        /* Move handler negative content to the right and set color to opacity 0 */

        &:before {
          right: -($checkbox-toggle-width-inner - $checkbox-toggle-height-inner);
          color: rgba(white, 0);
        }


        /* Move toggle handler to the right and show the positive handler content */

        &:after {
          right: $checkbox-toggle-border-width + $checkbox-toggle-padding;
          border-color: $checkbox-toggle-1;
          color: white;
        }
      }
    }


    /** Neutral toggle boxes
    ========================================================================= */

    &.k-checkbox-toggle--neutral {

      /* Grey background */

      label {
        &:after {
          background: $checkbox-toggle-neutral-0;
        }
      }


      /* Grey border */

      span {
        &:after {
          border-color: darkest($checkbox-toggle-neutral-0);
        }
      }


      /* Blue background */

      input:checked + label {
        &:after {
          background: $checkbox-toggle-neutral-1;
        }

        span {
          &:after {
            border-color: $checkbox-toggle-neutral-1;
          }
        }
      }
    }
  }
}


/* RTL */

@include modernizr-rtl('.k-appearance.k-checked') {
  .k-checkbox-toggle {
    label:before {
      right: auto;
      left: 0;
    }

    label:after {
      right: auto;
      left: $checkbox-toggle-border-width + $checkbox-toggle-padding;
    }

    span:before {
      right: auto;
      left: $checkbox-toggle-border-width + $checkbox-toggle-padding;
    }

    span:after {
      right: auto;
      left: ($checkbox-toggle-size * 2) - $checkbox-toggle-height-inner - ($checkbox-toggle-border-width + $checkbox-toggle-padding);
    }

    input:checked + label {
      span {
        &:before {
          right: auto;
          left: -($checkbox-toggle-width-inner - $checkbox-toggle-height-inner);
        }

        &:after {
          right: auto;
          left: $checkbox-toggle-border-width + $checkbox-toggle-padding;
        }
      }
    }
  }
}